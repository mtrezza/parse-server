{"version":3,"sources":["../src/ClientSDK.js"],"names":["semver","require","compatible","compatibleSDK","clientSDK","fromString","clientVersion","version","compatiblityVersion","sdk","satisfies","supportsForwardDelete","js","versionRE","match","toLowerCase","length","undefined","module","exports"],"mappings":";;AAAA,IAAIA,MAAM,GAAGC,OAAO,CAAC,QAAD,CAApB;;AAEA,SAASC,UAAT,CAAoBC,aAApB,EAAmC;AACjC,SAAO,UAAUC,SAAV,EAAqB;AAC1B,QAAI,OAAOA,SAAP,KAAqB,QAAzB,EAAmC;AACjCA,MAAAA,SAAS,GAAGC,UAAU,CAACD,SAAD,CAAtB;AACD,KAHyB,CAI1B;;;AACA,QAAI,CAACA,SAAL,EAAgB;AACd,aAAO,IAAP;AACD;;AACD,UAAME,aAAa,GAAGF,SAAS,CAACG,OAAhC;AACA,UAAMC,mBAAmB,GAAGL,aAAa,CAACC,SAAS,CAACK,GAAX,CAAzC;AACA,WAAOT,MAAM,CAACU,SAAP,CAAiBJ,aAAjB,EAAgCE,mBAAhC,CAAP;AACD,GAXD;AAYD;;AAED,SAASG,qBAAT,CAA+BP,SAA/B,EAA0C;AACxC,SAAOF,UAAU,CAAC;AAChBU,IAAAA,EAAE,EAAE;AADY,GAAD,CAAV,CAEJR,SAFI,CAAP;AAGD;;AAED,SAASC,UAAT,CAAoBE,OAApB,EAA6B;AAC3B,QAAMM,SAAS,GAAG,wBAAlB;AACA,QAAMC,KAAK,GAAGP,OAAO,CAACQ,WAAR,GAAsBD,KAAtB,CAA4BD,SAA5B,CAAd;;AACA,MAAIC,KAAK,IAAIA,KAAK,CAACE,MAAN,KAAiB,CAA9B,EAAiC;AAC/B,WAAO;AACLP,MAAAA,GAAG,EAAEK,KAAK,CAAC,CAAD,CADL;AAELP,MAAAA,OAAO,EAAEO,KAAK,CAAC,CAAD;AAFT,KAAP;AAID;;AACD,SAAOG,SAAP;AACD;;AAEDC,MAAM,CAACC,OAAP,GAAiB;AACfjB,EAAAA,UADe;AAEfS,EAAAA,qBAFe;AAGfN,EAAAA;AAHe,CAAjB","sourcesContent":["var semver = require('semver');\n\nfunction compatible(compatibleSDK) {\n  return function (clientSDK) {\n    if (typeof clientSDK === 'string') {\n      clientSDK = fromString(clientSDK);\n    }\n    // REST API, or custom SDK\n    if (!clientSDK) {\n      return true;\n    }\n    const clientVersion = clientSDK.version;\n    const compatiblityVersion = compatibleSDK[clientSDK.sdk];\n    return semver.satisfies(clientVersion, compatiblityVersion);\n  };\n}\n\nfunction supportsForwardDelete(clientSDK) {\n  return compatible({\n    js: '>=1.9.0',\n  })(clientSDK);\n}\n\nfunction fromString(version) {\n  const versionRE = /([-a-zA-Z]+)([0-9\\.]+)/;\n  const match = version.toLowerCase().match(versionRE);\n  if (match && match.length === 3) {\n    return {\n      sdk: match[1],\n      version: match[2],\n    };\n  }\n  return undefined;\n}\n\nmodule.exports = {\n  compatible,\n  supportsForwardDelete,\n  fromString,\n};\n"],"file":"ClientSDK.js"}