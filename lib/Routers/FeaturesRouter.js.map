{"version":3,"sources":["../../src/Routers/FeaturesRouter.js"],"names":["FeaturesRouter","PromiseRouter","mountRoutes","route","middleware","promiseEnforceMasterKeyAccess","req","config","features","globalConfig","create","read","update","delete","hooks","cloudCode","jobs","logs","level","size","order","until","from","push","immediatePush","hasPushSupport","scheduledPush","hasPushScheduledSupport","storedPushData","pushAudiences","localization","schemas","addField","removeField","addClass","removeClass","clearAllDataFromClass","exportClass","editClassLevelPermissions","editPointerPermissions","response","parseServerVersion","version"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;;;AAEO,MAAMA,cAAN,SAA6BC,sBAA7B,CAA2C;AAChDC,EAAAA,WAAW,GAAG;AACZ,SAAKC,KAAL,CAAW,KAAX,EAAkB,aAAlB,EAAiCC,UAAU,CAACC,6BAA5C,EAA2EC,GAAG,IAAI;AAChF,YAAM;AAAEC,QAAAA;AAAF,UAAaD,GAAnB;AACA,YAAME,QAAQ,GAAG;AACfC,QAAAA,YAAY,EAAE;AACZC,UAAAA,MAAM,EAAE,IADI;AAEZC,UAAAA,IAAI,EAAE,IAFM;AAGZC,UAAAA,MAAM,EAAE,IAHI;AAIZC,UAAAA,MAAM,EAAE;AAJI,SADC;AAOfC,QAAAA,KAAK,EAAE;AACLJ,UAAAA,MAAM,EAAE,IADH;AAELC,UAAAA,IAAI,EAAE,IAFD;AAGLC,UAAAA,MAAM,EAAE,IAHH;AAILC,UAAAA,MAAM,EAAE;AAJH,SAPQ;AAafE,QAAAA,SAAS,EAAE;AACTC,UAAAA,IAAI,EAAE;AADG,SAbI;AAgBfC,QAAAA,IAAI,EAAE;AACJC,UAAAA,KAAK,EAAE,IADH;AAEJC,UAAAA,IAAI,EAAE,IAFF;AAGJC,UAAAA,KAAK,EAAE,IAHH;AAIJC,UAAAA,KAAK,EAAE,IAJH;AAKJC,UAAAA,IAAI,EAAE;AALF,SAhBS;AAuBfC,QAAAA,IAAI,EAAE;AACJC,UAAAA,aAAa,EAAEjB,MAAM,CAACkB,cADlB;AAEJC,UAAAA,aAAa,EAAEnB,MAAM,CAACoB,uBAFlB;AAGJC,UAAAA,cAAc,EAAErB,MAAM,CAACkB,cAHnB;AAIJI,UAAAA,aAAa,EAAE,IAJX;AAKJC,UAAAA,YAAY,EAAE;AALV,SAvBS;AA8BfC,QAAAA,OAAO,EAAE;AACPC,UAAAA,QAAQ,EAAE,IADH;AAEPC,UAAAA,WAAW,EAAE,IAFN;AAGPC,UAAAA,QAAQ,EAAE,IAHH;AAIPC,UAAAA,WAAW,EAAE,IAJN;AAKPC,UAAAA,qBAAqB,EAAE,IALhB;AAMPC,UAAAA,WAAW,EAAE,KANN;AAOPC,UAAAA,yBAAyB,EAAE,IAPpB;AAQPC,UAAAA,sBAAsB,EAAE;AARjB;AA9BM,OAAjB;AA0CA,aAAO;AACLC,QAAAA,QAAQ,EAAE;AACRhC,UAAAA,QAAQ,EAAEA,QADF;AAERiC,UAAAA,kBAAkB,EAAEC;AAFZ;AADL,OAAP;AAMD,KAlDD;AAmDD;;AArD+C","sourcesContent":["import { version } from '../../package.json';\nimport PromiseRouter from '../PromiseRouter';\nimport * as middleware from '../middlewares';\n\nexport class FeaturesRouter extends PromiseRouter {\n  mountRoutes() {\n    this.route('GET', '/serverInfo', middleware.promiseEnforceMasterKeyAccess, req => {\n      const { config } = req;\n      const features = {\n        globalConfig: {\n          create: true,\n          read: true,\n          update: true,\n          delete: true,\n        },\n        hooks: {\n          create: true,\n          read: true,\n          update: true,\n          delete: true,\n        },\n        cloudCode: {\n          jobs: true,\n        },\n        logs: {\n          level: true,\n          size: true,\n          order: true,\n          until: true,\n          from: true,\n        },\n        push: {\n          immediatePush: config.hasPushSupport,\n          scheduledPush: config.hasPushScheduledSupport,\n          storedPushData: config.hasPushSupport,\n          pushAudiences: true,\n          localization: true,\n        },\n        schemas: {\n          addField: true,\n          removeField: true,\n          addClass: true,\n          removeClass: true,\n          clearAllDataFromClass: true,\n          exportClass: false,\n          editClassLevelPermissions: true,\n          editPointerPermissions: true,\n        },\n      };\n\n      return {\n        response: {\n          features: features,\n          parseServerVersion: version,\n        },\n      };\n    });\n  }\n}\n"],"file":"FeaturesRouter.js"}