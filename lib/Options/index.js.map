{"version":3,"sources":["../../src/Options/index.js"],"names":[],"mappings":";;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA","sourcesContent":["import { AnalyticsAdapter } from '../Adapters/Analytics/AnalyticsAdapter';\nimport { FilesAdapter } from '../Adapters/Files/FilesAdapter';\nimport { LoggerAdapter } from '../Adapters/Logger/LoggerAdapter';\nimport { StorageAdapter } from '../Adapters/Storage/StorageAdapter';\nimport { CacheAdapter } from '../Adapters/Cache/CacheAdapter';\nimport { MailAdapter } from '../Adapters/Email/MailAdapter';\nimport { PubSubAdapter } from '../Adapters/PubSub/PubSubAdapter';\nimport { WSSAdapter } from '../Adapters/WebSocketServer/WSSAdapter';\n\n// @flow\ntype Adapter<T> = string | any | T;\ntype NumberOrBoolean = number | boolean;\ntype NumberOrString = number | string;\ntype ProtectedFields = any;\n\nexport interface ParseServerOptions {\n  /* Your Parse Application ID\n  :ENV: PARSE_SERVER_APPLICATION_ID */\n  appId: string;\n  /* Your Parse Master Key */\n  masterKey: string;\n  /* URL to your parse server with http:// or https://.\n  :ENV: PARSE_SERVER_URL */\n  serverURL: string;\n  /* Restrict masterKey to be used by only these ips, defaults to [] (allow all ips)\n  :DEFAULT: [] */\n  masterKeyIps: ?(string[]);\n  /* Sets the app name */\n  appName: ?string;\n  /* Add headers to Access-Control-Allow-Headers */\n  allowHeaders: ?(string[]);\n  /* Sets the origin to Access-Control-Allow-Origin */\n  allowOrigin: ?string;\n  /* Adapter module for the analytics */\n  analyticsAdapter: ?Adapter<AnalyticsAdapter>;\n  /* Adapter module for the files sub-system */\n  filesAdapter: ?Adapter<FilesAdapter>;\n  /* Configuration for push, as stringified JSON. See http://docs.parseplatform.org/parse-server/guide/#push-notifications */\n  push: ?any;\n  /* Configuration for push scheduling, defaults to false.\n  :DEFAULT: false */\n  scheduledPush: ?boolean;\n  /* Adapter module for the logging sub-system */\n  loggerAdapter: ?Adapter<LoggerAdapter>;\n  /* Log as structured JSON objects\n  :ENV: JSON_LOGS */\n  jsonLogs: ?boolean;\n  /* Folder for the logs (defaults to './logs'); set to null to disable file based logging\n  :ENV: PARSE_SERVER_LOGS_FOLDER\n  :DEFAULT: ./logs */\n  logsFolder: ?string;\n  /* Set the logging to verbose\n  :ENV: VERBOSE */\n  verbose: ?boolean;\n  /* Sets the level for logs */\n  logLevel: ?string;\n  /* Maximum number of logs to keep. If not set, no logs will be removed. This can be a number of files or number of days. If using days, add 'd' as the suffix. (default: null) */\n  maxLogFiles: ?NumberOrString;\n  /* Disables console output\n  :ENV: SILENT */\n  silent: ?boolean;\n  /* The full URI to your database. Supported databases are mongodb or postgres.\n  :DEFAULT: mongodb://localhost:27017/parse */\n  databaseURI: string;\n  /* Options to pass to the mongodb client */\n  databaseOptions: ?any;\n  /* Adapter module for the database */\n  databaseAdapter: ?Adapter<StorageAdapter>;\n  /* Full path to your cloud code main.js */\n  cloud: ?string;\n  /* A collection prefix for the classes\n  :DEFAULT: '' */\n  collectionPrefix: ?string;\n  /* Key for iOS, MacOS, tvOS clients */\n  clientKey: ?string;\n  /* Key for the Javascript SDK */\n  javascriptKey: ?string;\n  /* Key for Unity and .Net SDK */\n  dotNetKey: ?string;\n  /* Key for encrypting your files\n  :ENV: PARSE_SERVER_ENCRYPTION_KEY */\n  encryptionKey: ?string;\n  /* Key for REST calls\n  :ENV: PARSE_SERVER_REST_API_KEY */\n  restAPIKey: ?string;\n  /* Read-only key, which has the same capabilities as MasterKey without writes */\n  readOnlyMasterKey: ?string;\n  /* Key sent with outgoing webhook calls */\n  webhookKey: ?string;\n  /* Key for your files */\n  fileKey: ?string;\n  /* Enable (or disable) the addition of a unique hash to the file names\n  :ENV: PARSE_SERVER_PRESERVE_FILE_NAME\n  :DEFAULT: false */\n  preserveFileName: ?boolean;\n  /* Personally identifiable information fields in the user table the should be removed for non-authorized users. Deprecated @see protectedFields */\n  userSensitiveFields: ?(string[]);\n  /* Protected fields that should be treated with extra security when fetching details.\n  :DEFAULT: {\"_User\": {\"*\": [\"email\"]}} */\n  protectedFields: ?ProtectedFields;\n  /* Enable (or disable) anonymous users, defaults to true\n  :ENV: PARSE_SERVER_ENABLE_ANON_USERS\n  :DEFAULT: true */\n  enableAnonymousUsers: ?boolean;\n  /* Enable (or disable) client class creation, defaults to true\n  :ENV: PARSE_SERVER_ALLOW_CLIENT_CLASS_CREATION\n  :DEFAULT: true */\n  allowClientClassCreation: ?boolean;\n  /* Enable (or disable) custom objectId\n  :ENV: PARSE_SERVER_ALLOW_CUSTOM_OBJECT_ID\n  :DEFAULT: false */\n  allowCustomObjectId: ?boolean;\n  /* Configuration for your authentication providers, as stringified JSON. See http://docs.parseplatform.org/parse-server/guide/#oauth-and-3rd-party-authentication\n  :ENV: PARSE_SERVER_AUTH_PROVIDERS */\n  auth: ?any;\n  /* Max file size for uploads, defaults to 20mb\n  :DEFAULT: 20mb */\n  maxUploadSize: ?string;\n  /* Enable (or disable) user email validation, defaults to false\n  :DEFAULT: false */\n  verifyUserEmails: ?boolean;\n  /* Prevent user from login if email is not verified and PARSE_SERVER_VERIFY_USER_EMAILS is true, defaults to false\n  :DEFAULT: false */\n  preventLoginWithUnverifiedEmail: ?boolean;\n  /* Email verification token validity duration, in seconds */\n  emailVerifyTokenValidityDuration: ?number;\n  /* an existing email verify token should be reused when resend verification email is requested\n  :DEFAULT: false */\n  emailVerifyTokenReuseIfValid: ?boolean;\n  /* account lockout policy for failed login attempts */\n  accountLockout: ?AccountLockoutOptions;\n  /* Password policy for enforcing password related rules */\n  passwordPolicy: ?PasswordPolicyOptions;\n  /* Adapter module for the cache */\n  cacheAdapter: ?Adapter<CacheAdapter>;\n  /* Adapter module for email sending */\n  emailAdapter: ?Adapter<MailAdapter>;\n  /* Public URL to your parse server with http:// or https://.\n  :ENV: PARSE_PUBLIC_SERVER_URL */\n  publicServerURL: ?string;\n  /* The options for pages such as password reset and email verification. Caution, this is an experimental feature that may not be appropriate for production.\n  :DEFAULT: {} */\n  pages: ?PagesOptions;\n  /* custom pages for password validation and reset\n  :DEFAULT: {} */\n  customPages: ?CustomPagesOptions;\n  /* parse-server's LiveQuery configuration object */\n  liveQuery: ?LiveQueryOptions;\n  /* Session duration, in seconds, defaults to 1 year\n  :DEFAULT: 31536000 */\n  sessionLength: ?number;\n  /* Max value for limit option on queries, defaults to unlimited */\n  maxLimit: ?number;\n  /* Sets wether we should expire the inactive sessions, defaults to true\n  :DEFAULT: true */\n  expireInactiveSessions: ?boolean;\n  /* When a user changes their password, either through the reset password email or while logged in, all sessions are revoked if this is true. Set to false if you don't want to revoke sessions.\n  :DEFAULT: true */\n  revokeSessionOnPasswordReset: ?boolean;\n  /* The TTL for caching the schema for optimizing read/write operations. You should put a long TTL when your DB is in production. default to 5000; set 0 to disable.\n  :DEFAULT: 5000 */\n  schemaCacheTTL: ?number;\n  /* Sets the TTL for the in memory cache (in ms), defaults to 5000 (5 seconds)\n  :DEFAULT: 5000 */\n  cacheTTL: ?number;\n  /* Sets the maximum size for the in memory cache, defaults to 10000\n  :DEFAULT: 10000 */\n  cacheMaxSize: ?number;\n  /* Replace HTTP Interface when using JS SDK in current node runtime, defaults to false. Caution, this is an experimental feature that may not be appropriate for production.\n  :ENV: PARSE_SERVER_ENABLE_EXPERIMENTAL_DIRECT_ACCESS\n  :DEFAULT: false */\n  directAccess: ?boolean;\n  /* Use a single schema cache shared across requests. Reduces number of queries made to _SCHEMA, defaults to false, i.e. unique schema cache per request.\n  :DEFAULT: false */\n  enableSingleSchemaCache: ?boolean;\n  /* Enables the default express error handler for all errors\n  :DEFAULT: false */\n  enableExpressErrorHandler: ?boolean;\n  /* Sets the number of characters in generated object id's, default 10\n  :DEFAULT: 10 */\n  objectIdSize: ?number;\n  /* The port to run the ParseServer, defaults to 1337.\n  :ENV: PORT\n  :DEFAULT: 1337 */\n  port: ?number;\n  /* The host to serve ParseServer on, defaults to 0.0.0.0\n  :DEFAULT: 0.0.0.0 */\n  host: ?string;\n  /* Mount path for the server, defaults to /parse\n  :DEFAULT: /parse */\n  mountPath: ?string;\n  /* Run with cluster, optionally set the number of processes default to os.cpus().length */\n  cluster: ?NumberOrBoolean;\n  /* middleware for express server, can be string or function */\n  middleware: ?((() => void) | string);\n  /* Starts the liveQuery server */\n  startLiveQueryServer: ?boolean;\n  /* Live query server configuration options (will start the liveQuery server) */\n  liveQueryServerOptions: ?LiveQueryServerOptions;\n  /* Options for request idempotency to deduplicate identical requests that may be caused by network issues. Caution, this is an experimental feature that may not be appropriate for production.\n  :ENV: PARSE_SERVER_EXPERIMENTAL_IDEMPOTENCY_OPTIONS\n  :DEFAULT: false */\n  idempotencyOptions: ?IdempotencyOptions;\n  /* Options for file uploads\n  :ENV: PARSE_SERVER_FILE_UPLOAD_OPTIONS\n  :DEFAULT: {} */\n  fileUpload: ?FileUploadOptions;\n  /* Full path to your GraphQL custom schema.graphql file */\n  graphQLSchema: ?string;\n  /* Mounts the GraphQL endpoint\n  :ENV: PARSE_SERVER_MOUNT_GRAPHQL\n  :DEFAULT: false */\n  mountGraphQL: ?boolean;\n  /* Mount path for the GraphQL endpoint, defaults to /graphql\n  :ENV: PARSE_SERVER_GRAPHQL_PATH\n  :DEFAULT: /graphql */\n  graphQLPath: ?string;\n  /* Mounts the GraphQL Playground - never use this option in production\n  :ENV: PARSE_SERVER_MOUNT_PLAYGROUND\n  :DEFAULT: false */\n  mountPlayground: ?boolean;\n  /* Mount path for the GraphQL Playground, defaults to /playground\n  :ENV: PARSE_SERVER_PLAYGROUND_PATH\n  :DEFAULT: /playground */\n  playgroundPath: ?string;\n  /* Callback when server has started */\n  serverStartComplete: ?(error: ?Error) => void;\n  /* Callback when server has closed */\n  serverCloseComplete: ?() => void;\n}\n\nexport interface PagesOptions {\n  /* Is true if the pages router should be enabled; this is required for any of the pages options to take effect. Caution, this is an experimental feature that may not be appropriate for production.\n  :DEFAULT: false */\n  enableRouter: ?boolean;\n  /* Is true if pages should be localized; this has no effect on custom page redirects.\n  :DEFAULT: false */\n  enableLocalization: ?boolean;\n  /* The path to the JSON file for localization; the translations will be used to fill template placeholders according to the locale. */\n  localizationJsonPath: ?string;\n  /* The fallback locale for localization if no matching translation is provided for the given locale. This is only relevant when providing translation resources via JSON file.\n  :DEFAULT: en */\n  localizationFallbackLocale: ?string;\n  /* The placeholder keys and values which will be filled in pages; this can be a simple object or a callback function.\n  :DEFAULT: {} */\n  placeholders: ?Object;\n  /* Is true if responses should always be redirects and never content, false if the response type should depend on the request type (GET request -> content response; POST request -> redirect response).\n  :DEFAULT: false */\n  forceRedirect: ?boolean;\n  /* The path to the pages directory; this also defines where the static endpoint '/apps' points to. Default is the './public/' directory.\n  :DEFAULT: ./public */\n  pagesPath: ?string;\n  /* The API endpoint for the pages. Default is 'apps'.\n  :DEFAULT: apps */\n  pagesEndpoint: ?string;\n  /* The URLs to the custom pages.\n  :DEFAULT: {} */\n  customUrls: ?PagesCustomUrlsOptions;\n}\n\nexport interface PagesCustomUrlsOptions {\n  /* The URL to the custom page for password reset. */\n  passwordReset: ?string;\n  /* The URL to the custom page for password reset -> link invalid. */\n  passwordResetLinkInvalid: ?string;\n  /* The URL to the custom page for password reset -> success. */\n  passwordResetSuccess: ?string;\n  /* The URL to the custom page for email verification -> success. */\n  emailVerificationSuccess: ?string;\n  /* The URL to the custom page for email verification -> link send fail. */\n  emailVerificationSendFail: ?string;\n  /* The URL to the custom page for email verification -> resend link -> success. */\n  emailVerificationSendSuccess: ?string;\n  /* The URL to the custom page for email verification -> link invalid. */\n  emailVerificationLinkInvalid: ?string;\n  /* The URL to the custom page for email verification -> link expired. */\n  emailVerificationLinkExpired: ?string;\n}\n\nexport interface CustomPagesOptions {\n  /* invalid link page path */\n  invalidLink: ?string;\n  /* verification link send fail page path */\n  linkSendFail: ?string;\n  /* choose password page path */\n  choosePassword: ?string;\n  /* verification link send success page path */\n  linkSendSuccess: ?string;\n  /* verify email success page path */\n  verifyEmailSuccess: ?string;\n  /* password reset success page path */\n  passwordResetSuccess: ?string;\n  /* invalid verification link page path */\n  invalidVerificationLink: ?string;\n  /* expired verification link page path */\n  expiredVerificationLink: ?string;\n  /* invalid password reset link page path */\n  invalidPasswordResetLink: ?string;\n  /* for masking user-facing pages */\n  parseFrameURL: ?string;\n}\n\nexport interface LiveQueryOptions {\n  /* parse-server's LiveQuery classNames\n  :ENV: PARSE_SERVER_LIVEQUERY_CLASSNAMES */\n  classNames: ?(string[]);\n  /* parse-server's LiveQuery redisOptions */\n  redisOptions: ?any;\n  /* parse-server's LiveQuery redisURL */\n  redisURL: ?string;\n  /* LiveQuery pubsub adapter */\n  pubSubAdapter: ?Adapter<PubSubAdapter>;\n  /* Adapter module for the WebSocketServer */\n  wssAdapter: ?Adapter<WSSAdapter>;\n}\n\nexport interface LiveQueryServerOptions {\n  /* This string should match the appId in use by your Parse Server. If you deploy the LiveQuery server alongside Parse Server, the LiveQuery server will try to use the same appId.*/\n  appId: ?string;\n  /* This string should match the masterKey in use by your Parse Server. If you deploy the LiveQuery server alongside Parse Server, the LiveQuery server will try to use the same masterKey.*/\n  masterKey: ?string;\n  /* This string should match the serverURL in use by your Parse Server. If you deploy the LiveQuery server alongside Parse Server, the LiveQuery server will try to use the same serverURL.*/\n  serverURL: ?string;\n  /* A JSON object that serves as a whitelist of keys. It is used for validating clients when they try to connect to the LiveQuery server. Check the following Security section and our protocol specification for details.*/\n  keyPairs: ?any;\n  /* Number of milliseconds between ping/pong frames. The WebSocket server sends ping/pong frames to the clients to keep the WebSocket alive. This value defines the interval of the ping/pong frame from the server to clients, defaults to 10 * 1000 ms (10 s).*/\n  websocketTimeout: ?number;\n  /* Number in milliseconds. When clients provide the sessionToken to the LiveQuery server, the LiveQuery server will try to fetch its ParseUser's objectId from parse server and store it in the cache. The value defines the duration of the cache. Check the following Security section and our protocol specification for details, defaults to 5 * 1000 ms (5 seconds).*/\n  cacheTimeout: ?number;\n  /* This string defines the log level of the LiveQuery server. We support VERBOSE, INFO, ERROR, NONE, defaults to INFO.*/\n  logLevel: ?string;\n  /* The port to run the LiveQuery server, defaults to 1337.\n  :DEFAULT: 1337 */\n  port: ?number;\n  /* parse-server's LiveQuery redisOptions */\n  redisOptions: ?any;\n  /* parse-server's LiveQuery redisURL */\n  redisURL: ?string;\n  /* LiveQuery pubsub adapter */\n  pubSubAdapter: ?Adapter<PubSubAdapter>;\n  /* Adapter module for the WebSocketServer */\n  wssAdapter: ?Adapter<WSSAdapter>;\n}\n\nexport interface IdempotencyOptions {\n  /* An array of paths for which the feature should be enabled. The mount path must not be included, for example instead of `/parse/functions/myFunction` specifiy `functions/myFunction`. The entries are interpreted as regular expression, for example `functions/.*` matches all functions, `jobs/.*` matches all jobs, `classes/.*` matches all classes, `.*` matches all paths.\n  :DEFAULT: [] */\n  paths: ?(string[]);\n  /* The duration in seconds after which a request record is discarded from the database, defaults to 300s.\n  :DEFAULT: 300 */\n  ttl: ?number;\n}\n\nexport interface AccountLockoutOptions {\n  /* number of minutes that a locked-out account remains locked out before automatically becoming unlocked. */\n  duration: ?number;\n  /* number of failed sign-in attempts that will cause a user account to be locked */\n  threshold: ?number;\n  /* Is true if the account lock should be removed after a successful password reset.\n  :DEFAULT: false */\n  unlockOnPasswordReset: ?boolean;\n}\n\nexport interface PasswordPolicyOptions {\n  /* a RegExp object or a regex string representing the pattern to enforce */\n  validatorPattern: ?string;\n  /* a callback function to be invoked to validate the password  */\n  validatorCallback: ?() => void;\n  /* disallow username in passwords */\n  doNotAllowUsername: ?boolean;\n  /* days for password expiry */\n  maxPasswordAge: ?number;\n  /* setting to prevent reuse of previous n passwords */\n  maxPasswordHistory: ?number;\n  /* time for token to expire */\n  resetTokenValidityDuration: ?number;\n  /* resend token if it's still valid */\n  resetTokenReuseIfValid: ?boolean;\n}\n\nexport interface FileUploadOptions {\n  /*  Is true if file upload should be allowed for anonymous users.\n  :DEFAULT: false */\n  enableForAnonymousUser: ?boolean;\n  /* Is true if file upload should be allowed for authenticated users.\n  :DEFAULT: true */\n  enableForAuthenticatedUser: ?boolean;\n  /* Is true if file upload should be allowed for anyone, regardless of user authentication.\n  :DEFAULT: false */\n  enableForPublic: ?boolean;\n}\n"],"file":"index.js"}